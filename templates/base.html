<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>{% block title %}æ¡Œæ¸¸åŠ©æ‰‹{% endblock %}</title>
    <link href="/static/common.css" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    {% block extra_head %}{% endblock %}
</head>

<body>
    <!-- Nav -->
    <nav class="apple-nav">
        <div class="apple-nav-content"
            style="min-height: 44px; display: flex; justify-content: space-between; align-items: center;">
            <div style="display: flex; align-items: center; gap: 8px;">
                {% block nav_left %}
                <a href="/" class="apple-nav-back"
                    style="position: static; min-height: 44px; align-items: center; display: flex;">
                    <i class="ph ph-house" style="font-size: 1.2rem; margin-right: 4px;"></i> é¦–é¡µ
                </a>
                {% endblock %}
            </div>

            <span class="apple-nav-title" style="position: absolute; left: 50%; transform: translateX(-50%);">
                {% block nav_title %}ğŸ² æ¡Œæ¸¸åŠ©æ‰‹{% endblock %}
            </span>

            <div class="apple-nav-action"
                style="position: static; display: flex; align-items: center; min-height: 44px;">
                {% block nav_right %}
                <a href="/gamelist"
                    style="color: var(--apple-gray); text-decoration: none; font-size: 0.9rem; font-weight: 500; display: flex; align-items: center; min-height: 44px;">
                    <i class="ph ph-list-dashes" style="font-size: 1.2rem; margin-right: 4px;"></i> æ¸¸æˆåˆ—è¡¨
                </a>
                {% endblock %}
            </div>
        </div>
    </nav>

    <div class="apple-container">
        {% block content %}{% endblock %}
    </div>

    {% block extra_body %}{% endblock %}
    
    <!-- Global UI Utilities -->
    <script>
        window.showToast = function(message, type = 'info') {
            // Remove existing toast if any to prevent clutter
            const existingToast = document.querySelector('.apple-toast');
            if (existingToast) {
                existingToast.remove();
            }

            const toast = document.createElement('div');
            toast.className = `apple-toast ${type !== 'info' ? 'apple-toast-' + type : ''}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // Trigger reflow to ensure the transition runs
            toast.offsetHeight;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        };
    </script>
</body>

</html>