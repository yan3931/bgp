{% set card_icons = {
'ä¾å« (Guard)': 'ğŸ—¡ï¸',
'ç‰§å¸ˆ (Priest)': 'ğŸ™',
'ç‰§å¸ˆ(Priest)': 'ğŸ™',
'ç”·çˆµ (Baron)': 'âš”ï¸',
'ä¾å¥³ (Handmaid)': 'ğŸ›¡ï¸',
'ç‹å­ (Prince)': 'ğŸ‘‘',
'å›½ç‹ (King)': 'ğŸ¤´',
'å¥³ä¼¯çˆµ (Countess)': 'ğŸ‘¸',
'å…¬ä¸» (Princess)': 'ğŸ’–',
'åˆºå®¢ (Assassin)': 'ğŸ—¡ï¸',
'å¼„è‡£ (Jester)': 'ğŸƒ',
'çº¢è¡£ä¸»æ•™ (Cardinal)': 'â›ª',
'ç”·çˆµå¤«äºº (Baroness)': 'ğŸ’ƒ',
'é©¬å±ç²¾ (Sycophant)': 'ğŸ­',
'ä¼¯çˆµ (Count)': 'ğŸ°',
'è­¦å®˜ (Constable)': 'ğŸ”’',
'å¥³ä¼¯çˆµ (Countess)': 'ğŸ‘¸',
'å¤ªå': 'ğŸ‘‘',
'å¤§ä¸»æ•™ (Bishop)': 'âœï¸'
} %}

{% set card_abilities = {
'åˆºå®¢ (Assassin)': 'è¢«ä¾å«çŒœä¸­æ—¶åæ€ä¾å«',
'å¼„è‡£ (Jester)': 'é¢„æµ‹ä¸€åç©å®¶ï¼Œå…¶è·èƒœåˆ™ä½ å¾—1åˆ†',
'ä¾å« (Guard)': 'çŒœç›®æ ‡æ‰‹ç‰Œ(éä¾å«)ï¼ŒçŒœä¸­åˆ™ç›®æ ‡å‡ºå±€',
'ç‰§å¸ˆ (Priest)': 'æŸ¥çœ‹ä¸€åç©å®¶çš„æ‰‹ç‰Œ',
'çº¢è¡£ä¸»æ•™ (Cardinal)': 'ä»¤ä¸¤äººäº’æ¢æ‰‹ç‰Œï¼Œä½ å¯çœ‹å…¶ä¸­ä¸€å¼ ',
'ç”·çˆµ (Baron)': 'ä¸ç›®æ ‡æ¯”ç‰Œï¼Œæ•°å­—å°è€…å‡ºå±€',
'ç”·çˆµå¤«äºº (Baroness)': 'æŸ¥çœ‹ä¸€è‡³ä¸¤åç©å®¶çš„æ‰‹ç‰Œ',
'ä¾å¥³ (Handmaid)': 'å…ç–«ï¼Œä¸‹å›åˆå‰ä¸å—å…¶ä»–å¡ç‰Œå½±å“',
'é©¬å±ç²¾ (Sycophant)': 'æŒ‡å®šä¸€äººï¼Œä¸‹ä¸€å¼ ç‰Œçš„ç›®æ ‡å¿…é¡»æ˜¯TA',
'ç‹å­ (Prince)': 'æŒ‡å®šä¸€åç©å®¶å¼ƒç‰Œå¹¶é‡æŠ½',
'ä¼¯çˆµ (Count)': 'ç»“æŸæ¯”ç‰Œæ—¶ï¼Œè‹¥åœ¨å¼ƒç‰Œå †åˆ™ä½ çš„æ•°å€¼+1',
'å›½ç‹ (King)': 'ä¸ä¸€åç©å®¶äº¤æ¢æ‰‹ç‰Œ',
'è­¦å®˜ (Constable)': 'è‹¥å‡ºå±€æ—¶æ­¤ç‰Œåœ¨ä½ çš„å¼ƒç‰Œå †ï¼Œåˆ™ä½ å¾—1åˆ†',
'å¥³ä¼¯çˆµ (Countess)': 'è‹¥æ‰‹æŒç‹å­æˆ–å›½ç‹ï¼Œåˆ™å¿…é¡»æ‰“å‡º',
'å¤ªå (Dowager)': 'ä¸ç›®æ ‡æ¯”ç‰Œï¼Œæ•°å­—å¤§è€…å‡ºå±€',
'å…¬ä¸» (Princess)': 'è¢«å¼ƒæ‰æ—¶ï¼Œä½ ç«‹å³å‡ºå±€',
'å¤§ä¸»æ•™ (Bishop)': 'çŒœç›®æ ‡æ•°å­—ï¼ŒçŒœä¸­å¾—1åˆ†ä¸”ç›®æ ‡å¯é‡æŠ½'
} %}

{% for item in stats %}
{% set card_number = item.name.split(' ')[0] %}
{% set card_display = item.name.split(' - ')[1] if ' - ' in item.name else item.name %}
{% set icon = card_icons.get(card_display, 'ğŸ´') %}
{% set ability = card_abilities.get(card_display, '') %}
<div class="card-item {% if item.remaining == 0 %}depleted{% endif %}" data-total="{{ item.total }}">

    <!-- Character Icon -->
    <div class="card-avatar card-num-{{ card_number }}">
        <span class="card-emoji">{{ icon }}</span>
        <span class="card-value">{{ card_number }}</span>
    </div>

    <!-- Card Body -->
    <div class="card-body">
        <div class="card-title-row">
            <span class="card-title">{{ card_display }}</span>
            <span
                class="card-prob {% if item.probability >= 15 %}hot{% elif item.probability >= 8 %}warm{% else %}cold{% endif %}">
                {{ item.probability }}%
            </span>
        </div>
        <div class="card-ability">{{ ability }}</div>
        <div class="card-meta">
            <!-- Dot indicators: filled = remaining, empty = played -->
            <div class="dots-track">
                {% for i in range(item.total) %}
                <span class="dot {% if i >= item.remaining %}used{% endif %}"></span>
                {% endfor %}
            </div>
            <span class="card-count-label">{{ item.remaining }}/{{ item.total }}</span>
        </div>
    </div>

    <!-- Actions -->
    <div class="card-actions">
        <button class="act-btn act-btn-minus" onclick="sendAction('remove', '{{ item.name }}')">
            <i class="fas fa-minus" style="font-size:0.7rem;"></i>
        </button>
        <button class="act-btn act-btn-play" onclick="sendAction('add', '{{ item.name }}')">å‡º</button>
    </div>
</div>
{% endfor %}